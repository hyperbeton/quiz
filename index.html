<!-- index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Строительная техника в Ташкенте</title>
    <link rel="stylesheet" href="style.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen active">
            <div class="loading-content">
                <div class="loading-spinner">
                    <i data-lucide="loader-2" class="spinner-icon"></i>
                </div>
                <h2>Строительная техника</h2>
                <p>Загружаем приложение...</p>
            </div>
        </div>

        <!-- Main Content -->
        <main id="main-content" class="hidden">
            <!-- Home Page -->
            <section id="home-page" class="page active">
                <div class="page-header">
                    <div class="location">
                        <i data-lucide="map-pin"></i>
                        <span>Ташкент</span>
                    </div>
                    <h1>Строительная техника</h1>
                </div>

                <div class="categories">
                    <div class="category-list">
                        <div class="category-item" data-category="mixers">
                            <div class="category-image">
                                <img src="img/миксер.jpg" alt="Автомиксеры" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="category-icon fallback">
                                    <i data-lucide="mixer"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>Автомиксеры</h3>
                                <p>Бетономешалки 8-12 м³</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="pumps">
                            <div class="category-image">
                                <img src="img/насос.jpg" alt="Автобетононасосы" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="category-icon fallback">
                                    <i data-lucide="sprout"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>Автобетононасосы</h3>
                                <p>Насосы 30-50 метров</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="dump-trucks">
                            <div class="category-image">
                                <img src="img/самосвал.jpg" alt="Самосвалы" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="category-icon fallback">
                                    <i data-lucide="truck"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>Самосвалы</h3>
                                <p>Грузовики 10-20 тонн</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="tonars">
                            <div class="category-image">
                                <img src="img/самосвал.jpg" alt="Тонары" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="category-icon fallback">
                                    <i data-lucide="truck"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>Тонары</h3>
                                <p>Малые грузовики 3-5 тонн</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="cranes">
                            <div class="category-image">
                                <img src="img/кран.jpg" alt="Краны" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="category-icon fallback">
                                    <i data-lucide="crane"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>Краны</h3>
                                <p>Подъемные 25-100 тонн</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="excavators">
                            <div class="category-image">
                                <img src="img/экскаватор.jpg" alt="Экскаваторы" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="category-icon fallback">
                                    <i data-lucide="digging"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>Экскаваторы</h3>
                                <p>Землеройная техника</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Category Page -->
            <section id="category-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2 id="category-title">Автомиксеры</h2>
                </div>

                <div class="equipment-list" id="category-equipment">
                    <!-- Equipment items will be loaded here -->
                </div>
            </section>

            <!-- Details Page -->
            <section id="details-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2 id="equipment-title">Детали техники</h2>
                </div>

                <div class="equipment-details" id="equipment-details">
                    <!-- Equipment details will be loaded here -->
                </div>
            </section>

            <!-- Profile Page -->
            <section id="profile-page" class="page">
                <div class="page-header">
                    <h2>Мой профиль</h2>
                    <button class="btn-logout" id="logout-btn">
                        <i data-lucide="log-out"></i>
                    </button>
                </div>

                <div class="profile-info">
                    <div class="user-avatar">
                        <i data-lucide="user"></i>
                    </div>
                    <div class="user-data">
                        <h3 id="user-name">Гость</h3>
                        <p id="user-phone">Ташкент, Узбекистан</p>
                        <div class="user-rating">
                            <span class="rating-stars">★★★★☆</span>
                            <span class="rating-value">4.5 (23 отзыва)</span>
                        </div>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="profile-action-btn" id="add-equipment-btn">
                        <i data-lucide="plus"></i>
                        <span>Добавить технику</span>
                    </button>
                    <button class="profile-action-btn" id="my-equipment-btn">
                        <i data-lucide="list"></i>
                        <span>Моя техника</span>
                    </button>
                    <button class="profile-action-btn" id="toggle-availability-btn">
                        <i data-lucide="toggle-right"></i>
                        <span>Управление доступностью</span>
                    </button>
                </div>

                <div class="user-equipment">
                    <h3>Моя техника</h3>
                    <div class="equipment-list" id="user-equipment">
                        <!-- User equipment will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Add Equipment Page -->
            <section id="add-equipment-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2>Добавить технику</h2>
                </div>

                <div class="add-equipment-form">
                    <div class="form-group">
                        <label for="equipment-type">Тип техники</label>
                        <select id="equipment-type">
                            <option value="">Выберите тип</option>
                            <option value="mixers">Автомиксер</option>
                            <option value="pumps">Автобетононасос</option>
                            <option value="dump-trucks">Самосвал</option>
                            <option value="tonars">Тонар</option>
                            <option value="cranes">Кран</option>
                            <option value="excavators">Экскаватор</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="equipment-name">Название техники</label>
                        <input type="text" id="equipment-name" placeholder="Например: Камаз 65115">
                    </div>

                    <div id="capacity-group" class="form-group">
                        <label for="equipment-capacity">Вместимость (м³)</label>
                        <input type="number" id="equipment-capacity" placeholder="Например: 10">
                    </div>

                    <div id="length-group" class="form-group hidden">
                        <label for="equipment-length">Длина стрелы (м)</label>
                        <input type="number" id="equipment-length" placeholder="Например: 36">
                    </div>

                    <div id="performance-group" class="form-group hidden">
                        <label for="equipment-performance">Производительность (м³/ч)</label>
                        <input type="number" id="equipment-performance" placeholder="Например: 90">
                    </div>

                    <div id="weight-group" class="form-group hidden">
                        <label for="equipment-weight">Грузоподъемность (т)</label>
                        <input type="number" id="equipment-weight" placeholder="Например: 25">
                    </div>

                    <div id="bucket-group" class="form-group hidden">
                        <label for="equipment-bucket">Объем ковша (м³)</label>
                        <input type="number" id="equipment-bucket" placeholder="Например: 1.2">
                    </div>

                    <div class="form-group">
                        <label for="equipment-price">Цена за маш/час (сум)</label>
                        <input type="number" id="equipment-price" placeholder="Например: 80000">
                    </div>

                    <div class="form-group">
                        <label for="equipment-location">Местоположение</label>
                        <input type="text" id="equipment-location" placeholder="Например: Ташкент, Юнусабадский район">
                    </div>

                    <div class="form-group">
                        <label for="equipment-description">Описание</label>
                        <textarea id="equipment-description" placeholder="Опишите состояние и особенности техники"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="payment-method">Способ оплаты</label>
                        <select id="payment-method">
                            <option value="cash">Наличные</option>
                            <option value="transfer">Безналичный расчет</option>
                            <option value="both">Оба способа</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button class="btn-primary" id="save-equipment">Добавить технику</button>
                    </div>
                </div>
            </section>

            <!-- Availability Management Page -->
            <section id="availability-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2>Управление доступностью</h2>
                </div>

                <div class="availability-management">
                    <div class="equipment-list" id="availability-equipment">
                        <!-- Equipment for availability management will be loaded here -->
                    </div>
                </div>
            </section>
        </main>

        <!-- Auth Modal -->
        <div id="auth-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Вход в систему</h3>
                    <button class="btn-close" id="close-auth-modal">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="phone">По телефону</button>
                    <button class="auth-tab" data-tab="test">Тестовый вход</button>
                </div>

                <div class="auth-form" id="phone-auth">
                    <div class="form-group">
                        <label for="user-phone">Номер телефона</label>
                        <div class="phone-input-container">
                            <span class="phone-prefix">+998</span>
                            <input type="tel" id="user-phone" placeholder="90 123 45 67" maxlength="9">
                        </div>
                        <p class="input-hint">Введите номер без +998 (только 9 цифр)</p>
                    </div>
                    
                    <div class="form-group hidden" id="code-group">
                        <label for="verification-code">Код подтверждения</label>
                        <input type="text" id="verification-code" placeholder="Введите 6-значный код" maxlength="6">
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn-primary" id="send-code-btn">Получить код</button>
                        <button class="btn-primary hidden" id="verify-code-btn">Подтвердить</button>
                    </div>
                    
                    <div class="auth-footer">
                        <p>Нажимая «Получить код», вы соглашаетесь с условиями использования</p>
                    </div>
                </div>

                <div class="auth-form hidden" id="test-auth">
                    <div class="test-users">
                        <h4>Тестовые пользователи (для демонстрации):</h4>
                        <div class="test-user-list">
                            <div class="test-user-item" data-phone="901234567">
                                <div class="test-user-info">
                                    <strong>Иван Петров</strong>
                                    <span>+998 90 123 45 67</span>
                                </div>
                                <button class="btn-test-login">Войти</button>
                            </div>
                            <div class="test-user-item" data-phone="901234568">
                                <div class="test-user-info">
                                    <strong>Алексей Смирнов</strong>
                                    <span>+998 90 123 45 68</span>
                                </div>
                                <button class="btn-test-login">Войти</button>
                            </div>
                        </div>
                    </div>
                    <div class="auth-footer">
                        <p>Тестовый вход работает без отправки SMS</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Verification Modal -->
        <div id="verification-modal" class="modal">
            <div class="modal-content">
                <div class="verification-header">
                    <i data-lucide="shield-check" class="verification-icon"></i>
                    <h3>Подтверждение номера</h3>
                </div>
                <div class="verification-content">
                    <p>Мы отправили SMS с кодом подтверждения на номер:</p>
                    <p class="verification-phone" id="verification-phone-number"></p>
                    <div class="form-group">
                        <label for="verification-code-input">Код подтверждения</label>
                        <input type="text" id="verification-code-input" placeholder="000000" maxlength="6">
                        <p class="input-hint">Для демо-версии используйте код: <strong>123456</strong></p>
                    </div>
                    <div class="verification-timer">
                        <p>Отправить код повторно через: <span id="countdown">60</span> сек.</p>
                    </div>
                </div>
                <div class="verification-actions">
                    <button class="btn-secondary" id="resend-code-btn" disabled>Отправить повторно</button>
                    <button class="btn-primary" id="confirm-code-btn">Подтвердить</button>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" data-page="home-page">
                <div class="nav-icon">
                    <i data-lucide="home"></i>
                </div>
                <span>Главная</span>
            </div>
            <div class="nav-item" data-page="category-page" data-category="mixers">
                <div class="nav-icon">
                    <i data-lucide="mixer"></i>
                </div>
                <span>Миксеры</span>
            </div>
            <div class="nav-item" data-page="category-page" data-category="pumps">
                <div class="nav-icon">
                    <i data-lucide="sprout"></i>
                </div>
                <span>Насосы</span>
            </div>
            <div class="nav-item" data-page="category-page" data-category="dump-trucks">
                <div class="nav-icon">
                    <i data-lucide="truck"></i>
                </div>
                <span>Самосвалы</span>
            </div>
            <div class="nav-item" data-page="profile-page">
                <div class="nav-icon">
                    <i data-lucide="user"></i>
                </div>
                <span>Профиль</span>
            </div>
        </nav>
    </div>

    <script src="script.js"></script>
</body>
</html>