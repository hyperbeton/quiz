<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –≤ –¢–∞—à–∫–µ–Ω—Ç–µ</title>
    <link rel="stylesheet" href="style.css">
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen active">
            <div class="loading-content">
                <div class="loading-spinner">
                    <i data-lucide="loader-2" class="spinner-icon"></i>
                </div>
                <h2>–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</h2>
                <p>–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ Telegram...</p>
            </div>
        </div>

        <!-- Main Content -->
        <main id="main-content" class="hidden">
            <!-- Home Page -->
            <section id="home-page" class="page active">
                <div class="page-header">
                    <div class="location">
                        <i data-lucide="map-pin"></i>
                        <span>–¢–∞—à–∫–µ–Ω—Ç</span>
                    </div>
                    <h1>–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</h1>
                </div>

                <div class="categories">
                    <div class="category-list">
                        <div class="category-item" data-category="mixers">
                            <div class="category-image">
                                <div class="category-icon">
                                    <i data-lucide="concrete-mixer"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>–ê–≤—Ç–æ–º–∏–∫—Å–µ—Ä—ã</h3>
                                <p>–ë–µ—Ç–æ–Ω–æ–º–µ—à–∞–ª–∫–∏ 8-12 –º¬≥</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="pumps">
                            <div class="category-image">
                                <div class="category-icon">
                                    <i data-lucide="pump"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>–ê–≤—Ç–æ–±–µ—Ç–æ–Ω–æ–Ω–∞—Å–æ—Å—ã</h3>
                                <p>–ù–∞—Å–æ—Å—ã 30-50 –º–µ—Ç—Ä–æ–≤</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="dump-trucks">
                            <div class="category-image">
                                <div class="category-icon">
                                    <i data-lucide="dump-truck"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>–°–∞–º–æ—Å–≤–∞–ª—ã</h3>
                                <p>–ì—Ä—É–∑–æ–≤–∏–∫–∏ 10-20 —Ç–æ–Ω–Ω</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="tonars">
                            <div class="category-image">
                                <div class="category-icon">
                                    <i data-lucide="truck"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>–¢–æ–Ω–∞—Ä—ã</h3>
                                <p>–ú–∞–ª—ã–µ –≥—Ä—É–∑–æ–≤–∏–∫–∏ 3-5 —Ç–æ–Ω–Ω</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="cranes">
                            <div class="category-image">
                                <div class="category-icon">
                                    <i data-lucide="crane"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>–ö—Ä–∞–Ω—ã</h3>
                                <p>–ü–æ–¥—ä–µ–º–Ω—ã–µ 25-100 —Ç–æ–Ω–Ω</p>
                            </div>
                        </div>

                        <div class="category-item" data-category="excavators">
                            <div class="category-image">
                                <div class="category-icon">
                                    <i data-lucide="excavator"></i>
                                </div>
                            </div>
                            <div class="category-info">
                                <h3>–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä—ã</h3>
                                <p>–ó–µ–º–ª–µ—Ä–æ–π–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Category Page -->
            <section id="category-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2 id="category-title">–ê–≤—Ç–æ–º–∏–∫—Å–µ—Ä—ã</h2>
                </div>

                <div class="equipment-list" id="category-equipment">
                    <!-- Equipment items will be loaded here -->
                </div>
            </section>

            <!-- Details Page -->
            <section id="details-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2 id="equipment-title">–î–µ—Ç–∞–ª–∏ —Ç–µ—Ö–Ω–∏–∫–∏</h2>
                </div>

                <div class="equipment-details" id="equipment-details">
                    <!-- Equipment details will be loaded here -->
                </div>
            </section>

            <!-- Profile Page -->
            <section id="profile-page" class="page">
                <div class="page-header">
                    <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                </div>

                <div class="profile-info">
                    <div class="user-avatar">
                        <img id="user-avatar-img" src="" alt="–ê–≤–∞—Ç–∞—Ä" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <i data-lucide="user" class="avatar-fallback"></i>
                    </div>
                    <div class="user-data">
                        <h3 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                        <p id="user-phone">–¢–∞—à–∫–µ–Ω—Ç, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</p>
                        <div class="user-rating">
                            <span class="rating-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                            <span class="rating-value" id="user-rating-value">0 (0 –æ—Ç–∑—ã–≤–æ–≤)</span>
                        </div>
                    </div>
                </div>

                <div class="profile-actions">
                    <button class="profile-action-btn" id="add-equipment-btn">
                        <i data-lucide="plus-circle"></i>
                        <span>–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É</span>
                    </button>
                    <button class="profile-action-btn" id="my-equipment-btn">
                        <i data-lucide="list"></i>
                        <span>–ú–æ—è —Ç–µ—Ö–Ω–∏–∫–∞</span>
                    </button>
                    <button class="profile-action-btn" id="toggle-availability-btn">
                        <i data-lucide="toggle-right"></i>
                        <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é</span>
                    </button>
                </div>

                <div class="user-equipment">
                    <h3>–ú–æ—è —Ç–µ—Ö–Ω–∏–∫–∞</h3>
                    <div class="equipment-list" id="user-equipment">
                        <!-- User equipment will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Add Equipment Page -->
            <section id="add-equipment-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É</h2>
                </div>

                <div class="add-equipment-form">
                    <div class="form-group">
                        <label for="equipment-type">–¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏ *</label>
                        <select id="equipment-type" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                            <option value="mixers">–ê–≤—Ç–æ–º–∏–∫—Å–µ—Ä</option>
                            <option value="pumps">–ê–≤—Ç–æ–±–µ—Ç–æ–Ω–æ–Ω–∞—Å–æ—Å</option>
                            <option value="dump-trucks">–°–∞–º–æ—Å–≤–∞–ª</option>
                            <option value="tonars">–¢–æ–Ω–∞—Ä</option>
                            <option value="cranes">–ö—Ä–∞–Ω</option>
                            <option value="excavators">–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="equipment-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ *</label>
                        <input type="text" id="equipment-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–º–∞–∑ 65115" required>
                    </div>

                    <div id="capacity-group" class="form-group">
                        <label for="equipment-capacity">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–º¬≥) *</label>
                        <input type="number" id="equipment-capacity" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 10" required>
                    </div>

                    <div id="length-group" class="form-group hidden">
                        <label for="equipment-length">–î–ª–∏–Ω–∞ —Å—Ç—Ä–µ–ª—ã (–º) *</label>
                        <input type="number" id="equipment-length" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 36" required>
                    </div>

                    <div id="performance-group" class="form-group hidden">
                        <label for="equipment-performance">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º¬≥/—á) *</label>
                        <input type="number" id="equipment-performance" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 90" required>
                    </div>

                    <div id="weight-group" class="form-group hidden">
                        <label for="equipment-weight">–ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å (—Ç) *</label>
                        <input type="number" id="equipment-weight" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25" required>
                    </div>

                    <div id="bucket-group" class="form-group hidden">
                        <label for="equipment-bucket">–û–±—ä–µ–º –∫–æ–≤—à–∞ (–º¬≥) *</label>
                        <input type="number" id="equipment-bucket" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1.2" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label for="equipment-price">–¶–µ–Ω–∞ –∑–∞ –º–∞—à/—á–∞—Å (—Å—É–º) *</label>
                        <input type="number" id="equipment-price" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 80000" required>
                    </div>

                    <div class="form-group">
                        <label for="equipment-location">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ *</label>
                        <input type="text" id="equipment-location" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢–∞—à–∫–µ–Ω—Ç, –Æ–Ω—É—Å–∞–±–∞–¥—Å–∫–∏–π —Ä–∞–π–æ–Ω" required>
                    </div>

                    <div class="form-group">
                        <label for="user-phone-input">–í–∞—à –Ω–æ–º–µ—Ä –¥–ª—è —Å–≤—è–∑–∏ *</label>
                        <div class="phone-input-container">
                            <span class="phone-prefix">+998</span>
                            <input type="tel" id="user-phone-input" placeholder="90 123 45 67" maxlength="9" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="equipment-description">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea id="equipment-description" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Ö–Ω–∏–∫–∏" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="payment-method">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
                        <select id="payment-method" required>
                            <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
                            <option value="transfer">–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç</option>
                            <option value="both">–û–±–∞ —Å–ø–æ—Å–æ–±–∞</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button class="btn-primary" id="save-equipment">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
                    </div>
                </div>
            </section>

            <!-- Availability Management Page -->
            <section id="availability-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é</h2>
                </div>

                <div class="availability-management">
                    <div class="equipment-list" id="availability-equipment">
                        <!-- Equipment for availability management will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Moderation Status Page -->
            <section id="moderation-page" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2>–°—Ç–∞—Ç—É—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h2>
                </div>

                <div class="moderation-status">
                    <div class="status-item pending">
                        <i data-lucide="clock"></i>
                        <div class="status-info">
                            <h3>–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h3>
                            <p>–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</p>
                            <span class="count" id="pending-count">0</span>
                        </div>
                    </div>
                    <div class="status-item approved">
                        <i data-lucide="check-circle"></i>
                        <div class="status-info">
                            <h3>–û–¥–æ–±—Ä–µ–Ω–æ</h3>
                            <p>–ü—Ä–æ—à–ª–æ –º–æ–¥–µ—Ä–∞—Ü–∏—é</p>
                            <span class="count" id="approved-count">0</span>
                        </div>
                    </div>
                    <div class="status-item rejected">
                        <i data-lucide="x-circle"></i>
                        <div class="status-info">
                            <h3>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</h3>
                            <p>–¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</p>
                            <span class="count" id="rejected-count">0</span>
                        </div>
                    </div>
                </div>

                <div class="moderation-list" id="moderation-equipment">
                    <!-- Equipment for moderation will be loaded here -->
                </div>
            </section>

            <!-- Admin Panel -->
            <section id="admin-panel" class="page">
                <div class="page-header">
                    <button class="btn-back">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2>üëë –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h2>
                </div>
                
                <div class="admin-content">
                    <div class="admin-stats">
                        <div class="stat-card pending">
                            <div class="stat-number stat-pending" id="stat-pending">0</div>
                            <div>–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</div>
                        </div>
                        <div class="stat-card approved">
                            <div class="stat-number stat-approved" id="stat-approved">0</div>
                            <div>–û–¥–æ–±—Ä–µ–Ω–æ</div>
                        </div>
                        <div class="stat-card rejected">
                            <div class="stat-number stat-rejected" id="stat-rejected">0</div>
                            <div>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</div>
                        </div>
                    </div>

                    <div class="filter-tabs">
                        <button class="tab-btn active" data-filter="pending">‚è≥ –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</button>
                        <button class="tab-btn" data-filter="approved">‚úÖ –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ</button>
                        <button class="tab-btn" data-filter="rejected">‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</button>
                    </div>

                    <div class="equipment-list" id="admin-equipment-list">
                        <!-- –ó–∞—è–≤–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                </div>

                <!-- Equipment Details Modal -->
                <div id="equipment-modal" class="modal hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title" id="modal-title">–î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏</h3>
                            <button class="close-modal" onclick="closeAdminModal()">√ó</button>
                        </div>
                        
                        <div id="modal-content">
                            <!-- –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ -->
                        </div>
                        
                        <div class="moderation-controls" id="modal-controls">
                            <!-- –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ -->
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" data-page="home-page">
                <div class="nav-icon">
                    <i data-lucide="home"></i>
                </div>
                <span>–ì–ª–∞–≤–Ω–∞—è</span>
            </div>
            <div class="nav-item" data-page="category-page" data-category="mixers">
                <div class="nav-icon">
                    <i data-lucide="concrete-mixer"></i>
                </div>
                <span>–ú–∏–∫—Å–µ—Ä—ã</span>
            </div>
            <div class="nav-item" data-page="category-page" data-category="pumps">
                <div class="nav-icon">
                    <i data-lucide="pump"></i>
                </div>
                <span>–ù–∞—Å–æ—Å—ã</span>
            </div>
            <div class="nav-item" data-page="profile-page">
                <div class="nav-icon">
                    <i data-lucide="user"></i>
                </div>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
            <div class="nav-item" data-page="admin-panel">
                <div class="nav-icon">
                    <i data-lucide="shield"></i>
                </div>
                <span>–ê–¥–º–∏–Ω</span>
            </div>
        </nav>
    </div>

    <script src="script.js"></script>
</body>
</html>